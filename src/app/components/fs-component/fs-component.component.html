<div mat-dialog-content>

  <span class="selected">
    <span *ngIf="allSelected; else elseSelected">
      <span class="selected-badge">All</span> Selected
    </span>
    <ng-template #elseSelected>
      <span class="selected-badge">{{data.data.length}}</span> Selected
    </ng-template>
  </span>

  <mat-checkbox [(ngModel)]="allSelected" (ngModelChange)="selectAllClick()">Select All</mat-checkbox>

    <button mat-icon-button (click)="cancelClick()" class="action" matTooltip="Cancel">
      <mat-icon>clear</mat-icon>
    </button>

  <div class="actions">
    <ng-container *ngFor="let action of data.config.actions">
      <div class="action" *ngIf="!action.actions; else elseMenu">
        <button mat-icon-button (click)="actionClick(action)" [matTooltip]="action.tooltip">
          <mat-icon>{{action.icon}}</mat-icon>
        </button>
      </div>
      <ng-template #elseMenu>
        <button mat-icon-button [matMenuTriggerFor]="appMenu" [matTooltip]="action.tooltip">
          <mat-icon>{{action.icon}}</mat-icon>
        </button>

        <mat-menu #appMenu="matMenu">
          <ng-container *ngFor="let action of action.actions">
            <button mat-menu-item [matMenuTriggerFor]="appSubMenu" *ngIf="action.actions; else elseSubMenu">{{ action.name }}</button>
            <mat-menu #appSubMenu="matMenu">
                <button *ngFor="let action of action.actions" mat-menu-item (click)="actionClick(action)">{{ action.name }}</button>
            </mat-menu>

            <ng-template #elseSubMenu>
                <button mat-menu-item (click)="actionClick(action)">{{ action.name }}</button>
            </ng-template>
          </ng-container>
        </mat-menu>
      </ng-template>
    </ng-container>
  </div>
</div>
